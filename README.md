# BalanceApp — управление пользовательским балансом (Laravel + PostgreSQL)

## Тестовое задание

Приложение для работы с балансом пользователей (PHP / Laravel)

###  Описание задачи

Реализовать небольшое приложение на Laravel, которое позволяет управлять балансом пользователей:

- Зачисление средств
- Списание средств
- Перевод между пользователями
- Получение текущего баланса

Все данные хранятся в базе данных PostgreSQL. Взаимодействие с приложением происходит через HTTP API (JSON-запросы и ответы).

---

##  HTTP API

### 1. Начисление средств

`POST /api/deposit`

```json
{
  "user_id": 1,
  "amount": 500.00,
  "comment": "Пополнение через карту"
}
```

### 2. Списание средств

POST /api/withdraw

```json
{
  "user_id": 1,
  "amount": 200.00,
  "comment": "Покупка подписки"
}
```

### 3. Перевод между пользователями

```
POST /api/transfer
{
  "from_user_id": 1,
  "to_user_id": 2,
  "amount": 150.00,
  "comment": "Перевод другу"
}
```

### 4. Получение баланса

GET /api/balance/{user_id}

```
{
  "user_id": 1,
  "balance": 350.00
}
```
### Требования

- Проект должен быть выполнен на PHP 8+.

- Хранение данных — в PostgreSQL.

- Выложить проект на гитхаб с Readme

- Приложение должно быть развернуто в докере

- Все денежные операции должны выполняться в транзакциях.

- Баланс не может быть отрицательным.

- Если у пользователя нет записи о балансе — она создаётся при первом пополнении.

- Все ответы и ошибки должны быть в формате JSON, с корректными HTTP-кодами.

- 200 — успешный ответ

- 400 / 422 — ошибки валидации

- 404 — пользователь не найден
- 
- 409 — конфликт (например, недостаточно средств)

- Транзакция имеет следующие статусы: deposit, withdraw, transfer_in, transfer_out
- 
  - * Будет плюсом покрытие кода тестами

### Описание

Проект построен по принципам чистой архитектуры с разделением на слои:

Domain Layer — бизнес-логика: сущности Balance, Transaction, User, value-объекты Money, UserId, TransactionId

Application Layer — use-case сервисы: DepositService, WithdrawService, TransferService, DTO и входные модели

Infrastructure Layer — контроллеры, репозитории, транзакционный менеджер

Tests — юнит-тесты сервисов

Приложение в папке `src/app/BalanceApp`

Развернутое приложение здесь [http://balance.w-online.ru/api/documentation](http://balance.w-online.ru/api/documentation)